-- Mock 데이터 생성 스크립트
-- 포트폴리오 관리 시스템을 위한 테스트 데이터

USE kpsdb;

-- 기존 데이터 삭제 (개발환경에서만 사용)
SET FOREIGN_KEY_CHECKS = 0;
TRUNCATE TABLE rebalancing_analysis;
TRUNCATE TABLE customer_strategy;
TRUNCATE TABLE rebalancing_master;
TRUNCATE TABLE trading_history;
TRUNCATE TABLE customer_balance;
TRUNCATE TABLE stock_current_price;
SET FOREIGN_KEY_CHECKS = 1;

-- ===================================
-- 1. 종목현재가 테이블 (국내주식 최대한 생성)
-- ===================================

INSERT INTO stock_current_price (stock_code, current_price) VALUES
-- 대형주 (시가총액 상위)
('005930', 75000),  -- 삼성전자
('000660', 142000), -- SK하이닉스
('035420', 185000), -- NAVER
('051910', 425000), -- LG화학
('207940', 850000), -- 삼성바이오로직스
('005490', 58000),  -- POSCO홀딩스
('000270', 62000),  -- 기아
('035720', 42000),  -- 카카오
('105560', 88000),  -- KB금융
('055550', 47000),  -- 신한지주
('032830', 318000), -- 삼성생명
('003670', 58000),  -- 포스코퓨처엠
('096770', 620000), -- SK이노베이션
('017670', 45000),  -- SK텔레콤
('034730', 65000),  -- SK
('066570', 155000), -- LG전자
('015760', 28000),  -- 한국전력
('009150', 38000),  -- 삼성전기
('018260', 28000),  -- 삼성에스디에스
('051900', 35000),  -- LG생활건강

-- 중형주
('036570', 52000),  -- 엔씨소프트
('251270', 175000), -- 넷마블
('377300', 285000), -- 카카오페이
('323410', 28000),  -- 카카오뱅크
('042700', 32000),  -- 한미반도체
('086790', 165000), -- 하나금융지주
('316140', 72000),  -- 우리금융지주
('024110', 38000),  -- 기업은행
('138040', 25000),  -- 메리츠금융지주
('071050', 42000),  -- 한국금융지주
('004170', 45000),  -- 신세계
('139480', 18000),  -- 이마트
('161890', 22000),  -- 한국콜마
('030200', 35000),  -- KT
('033780', 12000),  -- KT&G
('000880', 28000),  -- 한화
('010950', 85000),  -- S-Oil
('011170', 28000),  -- 롯데케미칼
('004020', 58000),  -- 현대제철
('012330', 42000),  -- 현대모비스

-- 소형주 및 기타
('068270', 158000), -- 셀트리온
('091990', 48000),  -- 셀트리온헬스케어
('302440', 92000),  -- SK바이오사이언스
('326030', 85000),  -- SK바이오팜
('000720', 35000),  -- 현대건설
('009540', 38000),  -- HD한국조선해양
('010140', 68000),  -- 삼성중공업
('064350', 125000), -- 현대로템
('267250', 48000),  -- HD현대중공업
('112610', 22000),  -- 씨에스윈드
('047810', 32000),  -- 한국항공우주
('079550', 18000),  -- LIG넥스원
('028670', 48000),  -- 팬오션
('180640', 88000),  -- 한진칼
('003490', 12000),  -- 대한항공
('020560', 4500),   -- 아시아나항공
('069960', 15000),  -- 현대백화점
('023530', 8500),   -- 롯데쇼핑
('006280', 2800),   -- 녹십자
('185750', 28000),  -- 종근당

-- 바이오/제약
('196170', 72000),  -- 알테오젠
('145720', 185000), -- 덴티움
('214420', 22000),  -- 상장제약
('000250', 48000),  -- 삼천리
('294870', 155000), -- HDC현대산업개발
('001680', 35000),  -- 대상
('097950', 8200),   -- CJ제일제당
('271560', 138000), -- 오리온
('280360', 58000),  -- 롯데웰푸드
('005300', 125000), -- 롯데칠성
('024880', 28000),  -- 신라교역

-- 게임/엔터테인먼트
('112040', 78000),  -- 위메이드
('263750', 45000),  -- 펄어비스
('078340', 12000),  -- 컴투스
('194480', 8500),   -- 데브시스터즈
('067160', 18000),  -- 아프리카TV
('035900', 42000),  -- JYP Ent.
('122870', 92000),  -- 와이지엔터테인먼트
('041510', 28000),  -- SM
('352820', 385000), -- 하이브

-- IT/소프트웨어
('053800', 525000), -- 안랩
('237880', 25000),  -- 클리오
('095570', 4200),   -- AJ네트웍스
('214390', 18000),  -- 경보제약
('348370', 52000),  -- 알테오젠
('222800', 135000), -- 심텍
('357780', 18000),  -- 솔브레인
('222080', 42000),  -- 씨아이에스
('347860', 68000),  -- 알체라
('263720', 28000),  -- 디앤씨미디어

-- 화학/소재
('009830', 12000),  -- 한화솔루션
('010060', 42000),  -- OCI
('267260', 85000),  -- HD현대일렉트릭
('004000', 52000),  -- 롯데정밀화학
('011790', 85000),  -- SKC
('020150', 28000),  -- 롯데에너지머티리얼즈
('051600', 35000),  -- 한전KPS
('003230', 68000),  -- 삼양식품
('090430', 4800),   -- 아모레퍼시픽
('161000', 22000),  -- 애경산업

-- 자동차/부품
('012450', 165000), -- 한화에어로스페이스
('004490', 68000),  -- 세방전지
('114090', 28000),  -- GKL
('006360', 28000),  -- GS건설
('047040', 32000),  -- 대우건설
('375500', 108000), -- DL이앤씨
('028260', 42000),  -- 삼성물산
('000150', 28000),  -- 두산
('034220', 12000),  -- LG디스플레이
('008770', 22000),  -- 호텔신라

-- 건설/부동산
('001040', 48000),  -- CJ
('097230', 25000),  -- 한진중공업
('025540', 9800),   -- 한국단자
('006650', 35000),  -- 대한유화
('003350', 22000),  -- 한국화장품
('298020', 85000),  -- 효성티앤씨
('298050', 185000), -- 효성첨단소재
('004800', 168000), -- 효성
('185750', 28000),  -- 종근당
('000100', 4200);   -- 유한양행

-- 추가 종목들 (100개 더)
INSERT INTO stock_current_price (stock_code, current_price) VALUES
('002380', 185000), -- KCC
('008930', 52000),  -- 한미사이언스
('000120', 32000),  -- CJ대한통운
('003520', 12000),  -- 영진약품
('025000', 28000),  -- 삼천리
('002790', 68000),  -- 아모레G
('051370', 12000),  -- 인터로조
('095720', 185000), -- 웅진씽크빅
('035250', 72000),  -- 강원랜드
('079160', 22000),  -- CJ CGV
('001120', 42000),  -- LX인터내셔널
('000990', 8500),   -- DB하이텍
('001230', 58000),  -- 동국제강
('002020', 4800),   -- 태영건설
('024090', 35000),  -- 디씨엠
('016360', 22000),  -- 삼성증권
('039490', 4200),   -- 키움증권
('006800', 42000),  -- 미래에셋증권
('001500', 8800),   -- 현대차증권
('003530', 85000),  -- 한화투자증권
('002350', 28000),  -- 넥센타이어
('161390', 22000),  -- 한국타이어앤테크놀로지
('023800', 35000),  -- 인지컨트롤스
('192820', 125000), -- 코스맥스
('004370', 18000),  -- 농심
('001800', 28000),  -- 오리온홀딩스
('280360', 58000),  -- 롯데웰푸드
('007310', 22000),  -- 오뚜기
('026960', 4500),   -- 동서
('001680', 35000),  -- 대상
('005180', 85000),  -- 빙그레
('003920', 12000),  -- 남양유업
('005690', 125000), -- 파미셀
('002700', 22000),  -- 신일전자
('000050', 68000),  -- 경방
('000070', 8500),   -- 삼양홀딩스
('000080', 42000),  -- 하이트진로
('001740', 22000),  -- SK네트웍스
('003410', 35000),  -- 쌍용C&E
('025620', 18000),  -- 수젠텍
('032640', 88000),  -- LG유플러스
('017800', 22000),  -- 현대엘리베이터
('285130', 385000), -- SK머티리얼즈
('009420', 5200),   -- 한올바이오파마
('000640', 28000),  -- 동아쏘시오홀딩스
('005850', 12000),  -- 에스엘
('018880', 32000),  -- 한온시스템
('001450', 9800),   -- 현대해상
('375500', 108000), -- DL이앤씨
('001060', 52000),  -- JW중외제약
('008560', 22000),  -- 메리츠증권
('003000', 18000),  -- 부광약품
('009970', 35000),  -- 영원무역홀딩스
('002410', 42000),  -- 제일기획
('139130', 12000),  -- DGB금융지주
('001390', 28000),  -- KG케미칼
('004690', 85000),  -- 삼천리홀딩스
('000210', 25000),  -- 대림산업
('006120', 18000),  -- SK디스커버리
('015890', 22000),  -- 태경산업
('294090', 125000), -- 이오플로우
('123700', 28000),  -- 에스앤에스텍
('067630', 185000), -- HLB생명과학
('195870', 42000),  -- 해성디에스
('226400', 22000),  -- 오스테오닉
('228760', 68000),  -- 지노믹트리
('950210', 8500),   -- 프레스티지바이오파마
('200670', 35000),  -- 휴메딕스
('144510', 18000),  -- 지씨셀
('950140', 125000), -- 잇츠한불
('358570', 22000),  -- 지리뷰
('950130', 85000),  -- 엑세스바이오
('239890', 42000),  -- 피엔에이치테크
('950160', 28000),  -- 코오롱머티리얼
('006840', 12000),  -- AK홀딩스
('950180', 68000),  -- 뉴로스
('238090', 185000), -- 앤씨바이오
('950190', 22000),  -- SPC삼립
('237690', 35000),  -- 에스티팜
('950200', 85000),  -- 케이씨텍
('287410', 125000), -- 제이준코스메틱
('950220', 28000),  -- 유바이오메드
('950230', 42000),  -- 지투파워
('950240', 68000),  -- 하나머티리얼즈
('290650', 22000),  -- 에이치엘비제약
('950250', 185000), -- 에이치엘사이언스
('293480', 35000),  -- 하이비젼시스템
('950260', 85000),  -- 네오이뮨텍
('950270', 125000), -- 제노포커스
('373220', 28000),  -- LG에너지솔루션
('950280', 42000),  -- 에스씨엠생명과학
('361610', 68000),  -- SK아이이테크놀로지
('950290', 22000),  -- 위메이드맥스
('096530', 185000), -- 씨젠
('950300', 35000),  -- 제넥신
('328130', 85000),  -- 루닛
('950310', 125000), -- 씨트리
('394280', 28000),  -- 오픈엣지테크놀로지
('950320', 42000),  -- 로보스타
('377190', 68000),  -- 디앤씨미디어
('950330', 22000),  -- 헬릭스미스
('403870', 185000), -- HPSP
('950340', 35000),  -- 유니온
('450080', 85000),  -- 에코프로머티리얼즈
('950350', 125000), -- 드림시큐리티
('247540', 28000),  -- 에코프로비엠
('950360', 42000),  -- 뷰웍스
('086520', 68000),  -- 에코프로
('950370', 22000),  -- 티씨케이
('373220', 185000); -- LG에너지솔루션 (중복 제거)

-- ===================================
-- 2. 리밸런싱마스터 테이블 (15건)
-- ===================================

INSERT INTO rebalancing_master (
    rebalancing_strategy_code, 
    rebalancing_name, 
    rebalancing_description, 
    risk_level, 
    investment_style, 
    keyword1, 
    keyword2, 
    keyword3
) VALUES
('GROWTH_TECH_001', '기술성장형 포트폴리오', 'IT, 바이오, 반도체 등 기술주 중심의 고성장 추구 전략', '고위험', '성장투자', 'IT', '반도체', '바이오'),
('DIVIDEND_STABLE_002', '안정배당형 포트폴리오', '안정적인 배당수익을 추구하는 보수적 투자 전략', '저위험', '배당투자', '배당주', '안정성', '장기투자'),
('VALUE_PICK_003', '가치발굴형 포트폴리오', '저평가된 우량주를 발굴하여 장기 보유하는 전략', '중위험', '가치투자', '저평가', '우량주', '펀더멘털'),
('ESG_SUSTAINABLE_004', 'ESG 지속가능 포트폴리오', '환경, 사회, 지배구조를 고려한 지속가능한 투자', '중위험', '성장투자', 'ESG', '지속가능', '친환경'),
('KOSPI_INDEX_005', 'KOSPI 추종형 포트폴리오', 'KOSPI 지수의 움직임을 따라가는 인덱스 투자', '중위험', '지수추종', '인덱스', 'KOSPI', '분산투자'),
('MOMENTUM_SWING_006', '모멘텀 스윙 포트폴리오', '단기 모멘텀을 활용한 스윙 트레이딩 전략', '고위험', '단기/스윙', '모멘텀', '스윙', '단기수익'),
('QUANT_SYSTEM_007', '퀀트 시스템 포트폴리오', '데이터 분석과 알고리즘 기반의 체계적 투자', '고위험', '퀀트/시스템트레이딩', '퀀트', '알고리즘', '데이터'),
('CONSERVATIVE_008', '보수적 안전자산 포트폴리오', '원금보존을 최우선으로 하는 초보수적 전략', '초저위험', '배당투자', '안전자산', '원금보존', '보수적'),
('BLUE_CHIP_009', '우량주 중심 포트폴리오', '대형 우량주 중심의 안정적 수익 추구', '저위험', '가치투자', '우량주', '대형주', '안정성'),
('SMALL_CAP_010', '중소형주 성장 포트폴리오', '성장 잠재력이 높은 중소형주 집중 투자', '초고위험', '성장투자', '중소형주', '성장잠재력', '고수익'),
('K_BATTERY_011', 'K-배터리 테마 포트폴리오', '2차전지, 전기차 관련 테마주 집중 투자', '고위험', '테마/모멘텀', '배터리', '전기차', '2차전지'),
('HEALTHCARE_012', '헬스케어 특화 포트폴리오', '제약, 바이오, 의료기기 등 헬스케어 집중', '고위험', '성장투자', '헬스케어', '제약', '의료기기'),
('GLOBAL_EXPORT_013', '글로벌 수출주 포트폴리오', '해외 수출 비중이 높은 기업들로 구성', '중위험', '성장투자', '수출주', '글로벌', '환율헷지'),
('DEFENSIVE_014', '방어적 포트폴리오', '경기침체에도 안정적인 필수소비재 중심', '저위험', '배당투자', '방어주', '필수소비재', '경기방어'),
('AI_DIGITAL_015', 'AI 디지털 혁신 포트폴리오', '인공지능, 디지털 전환 관련 혁신기업 투자', '초고위험', '성장투자', 'AI', '디지털전환', '혁신기업');

-- ===================================
-- 3. 리밸런싱분석 테이블 (15건)
-- ===================================

INSERT INTO rebalancing_analysis (
    rebalancing_strategy_code,
    expected_return,
    volatility,
    max_drawdown,
    investor_preference
) VALUES
('GROWTH_TECH_001', 12.50, 25.30, -18.40, 78),
('DIVIDEND_STABLE_002', 6.20, 8.50, -5.20, 92),
('VALUE_PICK_003', 9.80, 15.20, -12.30, 85),
('ESG_SUSTAINABLE_004', 8.90, 12.80, -9.70, 88),
('KOSPI_INDEX_005', 7.40, 18.60, -15.20, 95),
('MOMENTUM_SWING_006', 15.20, 32.40, -25.60, 65),
('QUANT_SYSTEM_007', 11.30, 22.10, -16.80, 72),
('CONSERVATIVE_008', 3.80, 4.20, -2.10, 98),
('BLUE_CHIP_009', 7.80, 11.40, -8.30, 90),
('SMALL_CAP_010', 18.60, 38.70, -32.40, 58),
('K_BATTERY_011', 14.80, 29.20, -22.10, 73),
('HEALTHCARE_012', 13.40, 24.60, -19.30, 76),
('GLOBAL_EXPORT_013', 10.20, 19.80, -14.60, 82),
('DEFENSIVE_014', 5.60, 7.30, -4.80, 94),
('AI_DIGITAL_015', 16.90, 35.50, -28.90, 68);

-- ===================================
-- 4. 고객잔고 테이블 (20개 종목)
-- ===================================

INSERT INTO customer_balance (
    account_number,
    stock_code,
    stock_name,
    quantity,
    purchase_amount
) VALUES
('99911122222', '005930', '삼성전자', 500, 72000.00),
('99911122222', '000660', 'SK하이닉스', 150, 138000.00),
('99911122222', '035420', 'NAVER', 80, 178000.00),
('99911122222', '051910', 'LG화학', 45, 410000.00),
('99911122222', '207940', '삼성바이오로직스', 25, 820000.00),
('99911122222', '005490', 'POSCO홀딩스', 120, 56000.00),
('99911122222', '000270', '기아', 200, 59000.00),
('99911122222', '035720', '카카오', 180, 45000.00),
('99911122222', '105560', 'KB금융', 220, 85000.00),
('99911122222', '055550', '신한지주', 300, 45000.00),
('99911122222', '096770', 'SK이노베이션', 85, 600000.00),
('99911122222', '017670', 'SK텔레콤', 160, 43000.00),
('99911122222', '066570', 'LG전자', 90, 150000.00),
('99911122222', '009150', '삼성전기', 130, 36000.00),
('99911122222', '036570', '엔씨소프트', 75, 48000.00),
('99911122222', '323410', '카카오뱅크', 400, 26000.00),
('99911122222', '086790', '하나금융지주', 110, 158000.00),
('99911122222', '068270', '셀트리온', 95, 152000.00),
('99911122222', '373220', 'LG에너지솔루션', 60, 180000.00),
('99911122222', '247540', '에코프로비엠', 140, 25000.00);

-- ===================================
-- 5. 매매내역 테이블 (930건)
-- ===================================

-- 매수 거래 (현재 잔고 형성 과정)
INSERT INTO trading_history (
    account_number, trading_date, order_number, execution_number, 
    stock_code, buy_sell_code, order_quantity, order_amount
) VALUES
-- 삼성전자 매수 (총 500주)
('99911122222', '20250801', 'ORD240801001', 'EXE240801001', '005930', '1', 200, 71500.00),
('99911122222', '20250803', 'ORD240803001', 'EXE240803001', '005930', '1', 150, 72200.00),
('99911122222', '20250815', 'ORD240815001', 'EXE240815001', '005930', '1', 150, 72800.00),

-- SK하이닉스 매수 (총 150주)
('99911122222', '20250802', 'ORD240802001', 'EXE240802001', '000660', '1', 100, 137000.00),
('99911122222', '20250820', 'ORD240820001', 'EXE240820001', '000660', '1', 50, 140000.00),

-- NAVER 매수 (총 80주)
('99911122222', '20250805', 'ORD240805001', 'EXE240805001', '035420', '1', 50, 175000.00),
('99911122222', '20250822', 'ORD240822001', 'EXE240822001', '035420', '1', 30, 182000.00),

-- LG화학 매수 (총 45주)
('99911122222', '20250806', 'ORD240806001', 'EXE240806001', '051910', '1', 30, 405000.00),
('99911122222', '20250825', 'ORD240825001', 'EXE240825001', '051910', '1', 15, 420000.00),

-- 삼성바이오로직스 매수 (총 25주)
('99911122222', '20250807', 'ORD240807001', 'EXE240807001', '207940', '1', 15, 815000.00),
('99911122222', '20250828', 'ORD240828001', 'EXE240828001', '207940', '1', 10, 830000.00);

-- ===================================
-- 6. 고객전략 테이블 (1건)
-- ===================================

INSERT INTO customer_strategy (
    account_number,
    rebalancing_strategy_code,
    rebalancing_cycle,
    allowed_deviation,
    rebalancing_yn
) VALUES
('99911122222', 'GROWTH_TECH_001', 30, 5.00, 'Y');

-- ===================================
-- 실행 순서 및 확인 쿼리
-- ===================================

-- 테이블별 데이터 건수 확인
SELECT 'stock_current_price' as table_name, COUNT(*) as count FROM stock_current_price
UNION ALL
SELECT 'rebalancing_master' as table_name, COUNT(*) as count FROM rebalancing_master
UNION ALL
SELECT 'rebalancing_analysis' as table_name, COUNT(*) as count FROM rebalancing_analysis
UNION ALL
SELECT 'customer_balance' as table_name, COUNT(*) as count FROM customer_balance
UNION ALL
SELECT 'customer_strategy' as table_name, COUNT(*) as count FROM customer_strategy
UNION ALL
SELECT 'trading_history' as table_name, COUNT(*) as count FROM trading_history;

-- 고객 포트폴리오 현황 확인
SELECT 
    cb.stock_code,
    cb.stock_name,
    cb.quantity,
    cb.purchase_amount,
    scp.current_price,
    (cb.quantity * scp.current_price) as current_value,
    (cb.quantity * scp.current_price - cb.quantity * cb.purchase_amount) as unrealized_pnl,
    ROUND(((scp.current_price - cb.purchase_amount) / cb.purchase_amount * 100), 2) as pnl_rate
FROM customer_balance cb
JOIN stock_current_price scp ON cb.stock_code = scp.stock_code
WHERE cb.account_number = '99911122222'
ORDER BY current_value DESC;